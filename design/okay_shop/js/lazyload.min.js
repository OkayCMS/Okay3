var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.LazyLoad=e()}(this,function(){"use strict";function t(t,e,n){var o=e._settings;!n&&h(t)||(O(o.callback_enter,t),B.indexOf(t.tagName)>-1&&(S(t,e),L(t,o.class_loading)),I(t,e),_(t),O(o.callback_set,t))}var e=function(t,e){return e?t.replace(/\.(jpe?g|png)/gi,".webp"):t},n="undefined"!=typeof window,o=n&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),r=n&&"IntersectionObserver"in window,i=n&&"classList"in document.createElement("p"),a=n&&"createImageBitmap"in window,s=n&&"fetch"in window,c=!1;!function(t){a&&s?fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then(function(e){return e&&void 0!==e.blob?e.blob():t(!1)}).then(function(e){return t(!!window.createImageBitmap(e))}):t(!1)}(function(t){c=t});var l={elements_selector:"img",container:o||n?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,callback_load:null,callback_error:null,callback_set:null,callback_enter:null,callback_finish:null,to_webp:!1},u=function(t){return _extends({},l,t)},d=function(t,e){return t.getAttribute("data-"+e)},f=function(t,e,n){var o="data-"+e;null!==n?t.setAttribute(o,n):t.removeAttribute(o)},_=function(t){return f(t,"was-processed","true")},h=function(t){return"true"===d(t,"was-processed")},v=function(t,e){return f(t,"ll-timeout",e)},b=function(t){return d(t,"ll-timeout")},g=function(t){return t.filter(function(t){return!h(t)})},m=function(t,e){return t.filter(function(t){return t!==e})},p=function(t,e){var n,o=new t(e);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:o}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:o})}window.dispatchEvent(n)},y=function(t,e,n,o){for(var r,i=0;r=t.children[i];i+=1)if("SOURCE"===r.tagName){var a=d(r,n);w(r,e,a,o)}},w=function(t,n,o,r){o&&t.setAttribute(n,e(o,r))},A=function(t,n){var o=c&&n.to_webp,r=d(t,n.data_src),i=d(t,n.data_bg);if(r){var a=e(r,o);t.style.backgroundImage='url("'+a+'")'}if(i){var s=e(i,o);t.style.backgroundImage=s}},E={IMG:function(t,e){var n=c&&e.to_webp,o=e.data_srcset,r=t.parentNode;r&&"PICTURE"===r.tagName&&y(r,"srcset",o,n);var i=d(t,e.data_sizes);w(t,"sizes",i);var a=d(t,o);w(t,"srcset",a,n);var s=d(t,e.data_src);w(t,"src",s,n)},IFRAME:function(t,e){var n=d(t,e.data_src);w(t,"src",n)},VIDEO:function(t,e){var n=e.data_src,o=d(t,n);y(t,"src",n),w(t,"src",o),t.load()}},I=function(t,e){var n=e._settings,o=t.tagName,r=E[o];if(r)return r(t,n),e._updateLoadingCount(1),void(e._elements=m(e._elements,t));A(t,n)},L=function(t,e){i?t.classList.add(e):t.className+=(t.className?" ":"")+e},k=function(t,e){i?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},O=function(t,e){t&&t(e)},C=function(t,e,n){t.addEventListener(e,n)},z=function(t,e,n){t.removeEventListener(e,n)},N=function(t,e,n){C(t,"load",e),C(t,"loadeddata",e),C(t,"error",n)},x=function(t,e,n){z(t,"load",e),z(t,"loadeddata",e),z(t,"error",n)},R=function(t,e,n){var o=n._settings,r=e?o.class_loaded:o.class_error,i=e?o.callback_load:o.callback_error,a=t.target;k(a,o.class_loading),L(a,r),O(i,a),n._updateLoadingCount(-1)},S=function(t,e){var n=function n(r){R(r,!0,e),x(t,n,o)},o=function o(r){R(r,!1,e),x(t,n,o)};N(t,n,o)},B=["IMG","IFRAME","VIDEO"],M=function(e,n,o){t(e,o),n.unobserve(e)},j=function(t){var e=b(t);e&&(clearTimeout(e),v(t,null))},T=function(t,e,n){var o=n._settings.load_delay,r=b(t);r||(r=setTimeout(function(){M(t,e,n),j(t)},o),v(t,r))},U=function(t){return t.isIntersecting||t.intersectionRatio>0},G=function(t){return{root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}},V=function(t,e){this._settings=u(t),this._setObserver(),this._loadingCount=0,this.update(e)};return V.prototype={_manageIntersection:function(t){var e=this._observer,n=this._settings.load_delay,o=t.target;n?U(t)?T(o,e,this):j(o):U(t)&&M(o,e,this)},_onIntersection:function(t){t.forEach(this._manageIntersection.bind(this))},_setObserver:function(){r&&(this._observer=new IntersectionObserver(this._onIntersection.bind(this),G(this._settings)))},_updateLoadingCount:function(t){this._loadingCount+=t,0===this._elements.length&&0===this._loadingCount&&O(this._settings.callback_finish)},update:function(t){var e=this,n=this._settings,r=t||n.container.querySelectorAll(n.elements_selector);this._elements=g(Array.prototype.slice.call(r)),!o&&this._observer?this._elements.forEach(function(t){e._observer.observe(t)}):this.loadAll()},destroy:function(){var t=this;this._observer&&(this._elements.forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,n){t(e,this,n)},loadAll:function(){var t=this;this._elements.forEach(function(e){t.load(e)})}},n&&function(t,e){if(e)if(e.length)for(var n,o=0;n=e[o];o+=1)p(t,n);else p(t,e)}(V,window.lazyLoadOptions),V});
//# sourceMappingURL=lazyload.min.js.map
